<div class="badges-container">
  <div class="header">
    <button class="back-button" (click)="goBack()">‚Üê Back</button>
    <h1>Hike Gang Badges</h1>
    <button class="diagnostic-button" (click)="runDiagnostics()">üîç Diagnostics</button>
    <button class="sync-button" (click)="triggerSync()">üîÑ Sync Activities</button>
  </div>

  <div class="diagnostic-results" *ngIf="diagnosticsData">
    <h3>Activity Diagnostics:</h3>
    <p><strong>Total Activities:</strong> {{ diagnosticsData.total_activities }}</p>
    <p><strong>#hg Activities:</strong> {{ diagnosticsData.hg_activities }}</p>
    <p><strong>#hg with Descriptions:</strong> {{ diagnosticsData.hg_activities_with_descriptions }}</p>
    <p><strong>Total with Descriptions:</strong> {{ diagnosticsData.total_activities_with_descriptions }}</p>
  </div>

  <div class="sync-status" *ngIf="syncStatus">
    <p><strong>Sync Status:</strong> {{ syncStatus }}</p>
  </div>

  <div class="badge-grid">
    <div
      class="badge-slot"
      *ngFor="let badge of badges"
      (click)="showInfo(badge)"
    >
      <img
        [src]="badge.image"
        [alt]="badge.name"
        [ngStyle]="{ filter: getTierFilter(badge.tier) }"
      />
    </div>
  </div>

  <!-- Popup -->
  <div class="badge-popup" *ngIf="selectedBadge" (click)="selectedBadge = null">
    <div class="popup-inner">
      <div class="badge-preview" *ngIf="selectedBadge">
        <img
          [src]="selectedBadge.image"
          [alt]="selectedBadge.name"
          [ngStyle]="{ filter: getTierFilter(selectedBadge.tier) }"
        />
      </div>
      <h2>{{ selectedBadge.name }}</h2>
      <p>{{ selectedBadge.description }}</p>
      <small>(Click anywhere to close)</small>
    </div>
  </div>
</div>
